language: python

services: docker

script:
  - docker login -u "$DOCKER_USERNAME" -p "$DOCKER_USERPASS"
  - '[[ "$TRAVIS_EVENT_TYPE" != "cron" &&
        -z "$(git diff --name-only HEAD~ | grep -e Dockerfile -e .travis.yml)" ]] ||
  (docker build --tag ams595/desktop:16.04 --tag ams595/desktop:latest . &&
   docker push ams595/desktop)'
  - docker images
